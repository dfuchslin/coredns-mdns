#!/sbin/openrc-run

description="CoreDNS DNS server"

# Override via /etc/conf.d/coredns or environment
: ${COREDNS_CONFIG:=/etc/coredns/Corefile}

supervisor="supervise-daemon"
command="/usr/bin/coredns"
command_args="-conf ${COREDNS_CONFIG}"
pidfile="/run/coredns.pid"
start_stop_daemon_args="--stdout /proc/1/fd/1 --stderr /proc/1/fd/2"

depend() {
	after net
	need avahi2dns
}
